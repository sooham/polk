<%- partial('_partial/header') %>

<div class="archive-page basquiat-archive">
  <!-- Paper texture background -->
  <div class="archive-texture"></div>

  <section class="archive-hero">
    <h1 class="archive-title">
      <svg class="archive-crown" viewBox="0 0 60 40" width="50" height="35">
        <path d="M5 35 L12 8 L20 25 L30 5 L40 25 L48 8 L55 35" stroke="#d4a84b" stroke-width="3" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
        <circle cx="12" cy="8" r="3.5" fill="#d4a84b"/>
        <circle cx="30" cy="5" r="3.5" fill="#d4a84b"/>
        <circle cx="48" cy="8" r="3.5" fill="#d4a84b"/>
      </svg>
      <span class="title-text">Archive</span>
      <span class="title-underline"></span>
    </h1>
    <p class="archive-subtitle">Thoughts, experiments, and discoveries</p>
    <!-- Decorative paint strokes -->
    <div class="hero-stroke stroke-a"></div>
    <div class="hero-stroke stroke-b"></div>
  </section>

  <section class="archive-content">
    <%
      var posts = page.posts.sort('date', 'desc');
      var currentYear = null;
    %>
    <% posts.each(function(post, index) { %>
      <% var postYear = date(post.date, 'YYYY'); %>
      <% if (currentYear !== postYear) { %>
        <% currentYear = postYear; %>
        <div class="year-divider" style="--divider-delay: <%= index * 0.05 %>s">
          <span class="year-text"><%= postYear %></span>
          <span class="year-line"></span>
          <span class="year-symbol">&#9670;</span>
        </div>
      <% } %>

      <article class="archive-card basquiat-post-card" style="--card-delay: <%= index * 0.08 %>s">
        <!-- Basquiat collage layer -->
        <div class="card-collage-layer">
          <div class="card-splatter splatter-1"></div>
          <div class="card-splatter splatter-2"></div>
          <% if (index % 3 === 0) { %>
            <svg class="mini-crown" viewBox="0 0 30 20" width="22" height="15">
              <path d="M2 18 L6 4 L10 12 L15 2 L20 12 L24 4 L28 18" stroke="#d4a84b" stroke-width="2" fill="none"/>
            </svg>
          <% } %>
          <% if (post.tags && post.tags.length) { %>
            <span class="card-scribble"><%= post.tags.toArray()[0].name %></span>
          <% } %>
        </div>

        <a href="<%- url_for(post.path) %>" class="card-link">
          <div class="card-content">
            <time class="card-date">
              <span class="date-month"><%= date(post.date, 'MMM') %></span>
              <span class="date-day"><%= date(post.date, 'DD') %></span>
            </time>
            <div class="card-info">
              <h2 class="card-title"><%= post.title %></h2>
              <p class="card-excerpt">
                <%- truncate(strip_html(post.content), {length: 120, separator: ' '}) %>
              </p>
            </div>
            <span class="card-arrow">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                <path d="M5 12h14M12 5l7 7-7 7"/>
              </svg>
            </span>
          </div>
        </a>

        <!-- Raw frame decoration -->
        <div class="card-frame"></div>
      </article>
    <% }); %>
  </section>

  <%- partial('_partial/paginator') %>
</div>

<%- partial('_partial/footer') %>
